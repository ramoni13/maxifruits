<!DOCTYPE html>
<html>
<head>
<script src="https://ramoni13.github.io/DJ_Festival/html5-qrcode.min.js"></script>
	<style>
        	body, button {
			font-size: 72px;
		}
	</style>
</head>
<script>
	function begin() {
		var html5QrcodeScanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 400 }); 
		html5QrcodeScanner.render(onScanSuccess);
	}
	
	function onScanSuccess(qrCodeMessage) { 
		console.log(qrCodeMessage);
		document.getElementById("reader").style.display = 'none';
		document.getElementById("playerDeezer").style.display = 'block';
		readTrack(qrCodeMessage);
	}; 
	function init() {
		document.getElementById("reader").style.display = 'none';
		document.getElementById("playerDeezer").style.display = 'none';
		document.getElementById("menu").style.display = 'block';
	}
	function oneSong() {
		document.getElementById("reader").style.display = 'block';
		document.getElementById("playerDeezer").style.display = 'none';
		document.getElementById("menu").style.display = 'none';
		begin();
	}
	function readTrack(idTrack) {
		(function() {
		var w = document[typeof document.getElementsByClassName === 'function' ? 'getElementsByClassName' : 'querySelectorAll']('deezer-widget-player');
		for (var i = 0, l = w.length; i < l; i++) {
			w[i].innerHTML = '';
			var el = document.createElement('iframe');
			el.src = w[i].getAttribute('data-src') + "&id=" + idTrack;
			el.scrolling = w[i].getAttribute('data-scrolling');
			el.frameBorder = w[i].getAttribute('data-frameborder');
			el.setAttribute('frameBorder', w[i].getAttribute('data-frameborder'));
			el.allowTransparency = w[i].getAttribute('data-allowTransparency');
			el.width = w[i].getAttribute('data-width');
			el.height = w[i].getAttribute('data-height');
			w[i].appendChild(el);
		}
		}());
	
	}
</script>

<body width="640px" onload="javascript:init()">
	<h2>DJ's Party Mix Festival</h2>
	<div width="640px" id="reader"></div>
	
	<div width="640px" id="playerDeezer">
		<div class="deezer-widget-player" 
		data-src="https://www.deezer.com/plugins/player?format=classic&autoplay=false&playlist=true&width=700&height=350&color=EF5466&layout=&size=medium&type=tracks&app_id=455462" 
		data-scrolling="no" 
		data-frameborder="0" 
		data-allowTransparency="true" 
		data-width="700" 
		data-height="350">
		</div>
		<button onclick="javascript:init()">Menu</button>
	</div>
	
	<div width="640px" id="menu">
		<button onclick="javascript:oneSong()">Ecouter 1 chanson</button>
		<button onclick="javascript:createPlaylist()">Cr√©er 1 playlist</button>
	</div>
</body>
</html> 
